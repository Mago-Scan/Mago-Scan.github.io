<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conte√∫do da Pasta SCAN</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f6f8fa;
            color: #24292f;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 6px;
            border: 1px solid #d0d7de;
            padding: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #d0d7de;
        }
        
        h1 {
            color: #0969da;
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .path-info {
            background-color: #f6f8fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 25px;
            border: 1px solid #d0d7de;
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 14px;
        }
        
        .contents {
            margin-top: 20px;
        }
        
        .item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin-bottom: 8px;
            background-color: #ffffff;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            transition: all 0.2s;
            text-decoration: none;
            color: inherit;
        }
        
        .item:hover {
            background-color: #f6f8fa;
            border-color: #0969da;
            transform: translateY(-2px);
        }
        
        .item-icon {
            font-size: 20px;
            margin-right: 12px;
            width: 24px;
            text-align: center;
        }
        
        .folder {
            color: #54aeff;
        }
        
        .file {
            color: #57606a;
        }
        
        .item-info {
            flex: 1;
        }
        
        .item-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }
        
        .item-details {
            font-size: 12px;
            color: #57606a;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #57606a;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0969da;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background-color: #ffebe9;
            border: 1px solid #ff8182;
            border-radius: 6px;
            padding: 20px;
            color: #cf222e;
            text-align: center;
        }
        
        .empty {
            text-align: center;
            padding: 40px;
            color: #57606a;
            font-style: italic;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: #57606a;
            font-size: 14px;
            padding-top: 20px;
            border-top: 1px solid #d0d7de;
        }
        
        .refresh-btn {
            background-color: #0969da;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: background-color 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .refresh-btn:hover {
            background-color: #0550ae;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <span>üìÇ</span>
                Pasta SCAN
            </h1>
            <p>Conte√∫do do diret√≥rio SCAN no reposit√≥rio GitHub</p>
        </header>
        
        <div class="path-info">
            <strong>Caminho:</strong> /SCAN/
            <br>
            <small>Reposit√≥rio: <span id="repo-info">Carregando...</span></small>
        </div>
        
        <div id="contents" class="contents">
            <div class="loading">
                <div class="spinner"></div>
                <p>Carregando conte√∫do da pasta SCAN...</p>
            </div>
        </div>
        
        <footer>
            <p>Visualizador de diret√≥rio GitHub</p>
            <button class="refresh-btn" onclick="loadContents()">
                <span>üîÑ</span>
                Atualizar
            </button>
            <p id="last-update" style="margin-top: 10px; font-size: 12px;"></p>
        </footer>
    </div>

    <script>
        // Configura√ß√µes do reposit√≥rio
        const REPO_OWNER = 'Mago-Scan'; // Substitua pelo seu nome de usu√°rio
        const REPO_NAME = 'Mago-Scan.github.io'; // Substitua pelo nome do reposit√≥rio
        const SCAN_PATH = 'SCAN'; // Nome da pasta
        
        // Elementos DOM
        const contentsDiv = document.getElementById('contents');
        const lastUpdateSpan = document.getElementById('last-update');
        const repoInfoSpan = document.getElementById('repo-info');
        
        // Fun√ß√£o para atualizar timestamp
        function updateTimestamp() {
            const now = new Date();
            lastUpdateSpan.textContent = `√öltima atualiza√ß√£o: ${now.toLocaleTimeString('pt-BR')}`;
        }
        
        // Fun√ß√£o para mostrar erro
        function showError(message) {
            contentsDiv.innerHTML = `
                <div class="error">
                    <h3>‚ùå Erro ao carregar conte√∫do</h3>
                    <p>${message}</p>
                    <p style="margin-top: 10px; font-size: 12px;">
                        Certifique-se de que o reposit√≥rio e o caminho est√£o configurados corretamente.
                    </p>
                </div>
            `;
            updateTimestamp();
        }
        
        // Fun√ß√£o para mostrar pasta vazia
        function showEmpty() {
            contentsDiv.innerHTML = `
                <div class="empty">
                    <div class="empty-icon">üìÇ</div>
                    <h3>Pasta vazia</h3>
                    <p>A pasta SCAN n√£o cont√©m nenhum arquivo ou subpasta.</p>
                </div>
            `;
        }
        
        // Fun√ß√£o para carregar conte√∫do da pasta SCAN
        async function loadContents() {
            try {
                // Atualizar informa√ß√µes do reposit√≥rio
                repoInfoSpan.textContent = `${REPO_OWNER}/${REPO_NAME}`;
                
                // Mostrar estado de carregamento
                contentsDiv.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Carregando conte√∫do da pasta SCAN...</p>
                    </div>
                `;
                
                // Usar a API do GitHub para listar o conte√∫do da pasta
                const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${SCAN_PATH}`;
                
                console.log('Buscando:', apiUrl); // Para debug
                
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        showError(`Pasta "${SCAN_PATH}" n√£o encontrada no reposit√≥rio.`);
                    } else {
                        showError(`Erro ${response.status}: ${response.statusText}`);
                    }
                    return;
                }
                
                const data = await response.json();
                
                // Verificar se √© um array (conte√∫do da pasta) ou um objeto (arquivo √∫nico)
                if (!Array.isArray(data)) {
                    showError(`"${SCAN_PATH}" √© um arquivo, n√£o uma pasta.`);
                    return;
                }
                
                // Ordenar: pastas primeiro, depois arquivos, ambos em ordem alfab√©tica
                data.sort((a, b) => {
                    if (a.type === 'dir' && b.type !== 'dir') return -1;
                    if (a.type !== 'dir' && b.type === 'dir') return 1;
                    return a.name.localeCompare(b.name);
                });
                
                // Construir HTML
                if (data.length === 0) {
                    showEmpty();
                } else {
                    let html = '';
                    
                    data.forEach(item => {
                        const isFolder = item.type === 'dir';
                        const icon = isFolder ? 'üìÅ' : 'üìÑ';
                        const iconClass = isFolder ? 'folder' : 'file';
                        const typeText = isFolder ? 'Pasta' : 'Arquivo';
                        const sizeInfo = isFolder ? '' : ` ‚Ä¢ ${formatBytes(item.size || 0)}`;
                        const itemUrl = item.html_url;
                        
                        html += `
                            <a href="${itemUrl}" target="_blank" class="item">
                                <div class="item-icon ${iconClass}">${icon}</div>
                                <div class="item-info">
                                    <div class="item-name">${item.name}</div>
                                    <div class="item-details">
                                        ${typeText}${sizeInfo}
                                    </div>
                                </div>
                            </a>
                        `;
                    });
                    
                    contentsDiv.innerHTML = html;
                }
                
                updateTimestamp();
                
            } catch (error) {
                console.error('Erro:', error);
                showError(`Erro de conex√£o: ${error.message}`);
            }
        }
        
        // Fun√ß√£o para formatar bytes
        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Carregar conte√∫do quando a p√°gina for aberta
        document.addEventListener('DOMContentLoaded', loadContents);
    </script>
</body>
</html>
